<?phpinclude "../Clases/TemplatePage.php";include "../Clases/Fuec.php";$util = new Utilities();$template = new TemplatePage(true, true, 'empleado');if(!isset($_SESSION['number'])){	header('location:Fuec_srch.php');}$template->headerForms('FUEC');$template->navigateBar('FuecPassenger_add');$fuec = new Fuec();$fuecForm = new JFormer('fuecForm', array('title' => '<div align="center"><h2>Ocupantes del FUEC No. '.$_SESSION['number'].'</h2></div>', 'submitButtonText' => 'Aceptar', 'requiredText' => '*', 'pageNavigator' => true));$fuec->getCapacityAvailable($_SESSION['number']);$result = $fuec->result->FetchRow();if($result['size'] > 1) {	$jFormPage2 = new JFormPage($fuecForm->id . 'AddData', array('title' => 'Adicionar'));	$jFormSection2 = new JFormSection($fuecForm->id . 'Add', array(			'title' => '<p>Pasajero</p>',			'instanceOptions' => array('max' => $result['size'], 'addButtonText' => 'Adicionar', 'removeButtonText' => 'Quitar',)	));	$jFormSection2->addJFormComponentArray(array(		new JFormComponentDropDown('docType', 'Tipo de documento:  ', $util->fillDropDown('cc_tipo_doc_fld'), array('disabled' => false)),		new JFormComponentSingleLineText('docNum', 'Documento:  ', array('initialValue' => '', 'disabled' => false)),		new JFormComponentSingleLineText('name', 'Nombre:  ', array('initialValue' => '', 'disabled' => false)),    	));	$jFormPage2->addJFormSection($jFormSection2);	$fuecForm->addJFormPage($jFormPage2);}else {	if($result['size'] == 1) {		$jFormPage2 = new JFormPage($fuecForm->id . 'AddData', array('title' => 'Adicionar'));		$jFormSection2 = new JFormSection($fuecForm->id . 'Add', array(	'title' => '<p>Pasajero</p>'));		$jFormSection2->addJFormComponentArray(array(			new JFormComponentDropDown('docType', 'Tipo de documento:  ', $util->fillDropDown('cc_tipo_doc_fld'), array('disabled' => false)),			new JFormComponentSingleLineText('docNum', 'Documento:  ', array('initialValue' => '', 'disabled' => false)),			new JFormComponentSingleLineText('name', 'Nombre:  ', array('initialValue' => '', 'disabled' => false)),    		));		$jFormPage2->addJFormSection($jFormSection2);		$fuecForm->addJFormPage($jFormPage2);	}}$fuec->getPassengersFuec($_SESSION['number']);$jFormPage1 = new JFormPage($fuecForm->id . 'ModifyData', array('title' => 'Modificar/Eliminar'));$i = 1;while($passenger = $fuec->result->FetchRow()) {	$jFormSection = new JFormSection($fuecForm->id . 'Modify' . $i, array('title' => '<p>Pasajero ' . $i . '</p>'));	$jFormSection->addJFormComponentArray(array(		new JFormComponentDropDown('docType', 'Tipo de documento:  ', $util->fillDropDownVew('cc_tipo_doc_fld', $passenger['docType']), array('disabled' => false)),		new JFormComponentSingleLineText('docNum', 'Documento:  ', array('initialValue' => $passenger['docNum'], 'disabled' => false)),		new JFormComponentSingleLineText('name', 'Nombre:  ', array('initialValue' => $passenger['name'], 'disabled' => false)),		new JFormComponentMultipleChoice('delete' . $i, '', array(array('value' => '', 'label' => 'Eliminar', 'checked' => false, 'disabled' => false))),	));	$jFormPage1->addJFormSection($jFormSection);	$i++;}$jFormPage1->addJFormSection($jFormSection);$fuecForm->addJFormPage($jFormPage1);function onSubmit($formValues) {	$fuec = new Fuec();	$respCode = $fuec->modifyFuecPassenger($formValues, $_SESSION['number']);	if($respCode != 0) {		switch ($respCode) {			case 10:				$response = array('failureNoticeHtml' => 'No hay capacidad para ingresar mas ocupantes.');				break;			default:				$response = array('failureNoticeHtml' => 'Inconvenientes tecnicos al procesar los ocupantes.');		}	}	else {		$response = array('successPageHtml' => '<meta http-equiv="refresh" content="0; url=Fuec_srch.php">');	}	return $response;}$template->bodyForms($fuecForm);$template->tail();?>